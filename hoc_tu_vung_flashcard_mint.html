<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>H·ªçc T·ª´ V·ª±ng - Flashcard Phi√™n √Çm & Ph√°t √Çm Anh-M·ªπ</title>
  <style>
    :root{
      --mint:#cff6ec;
      --mint-strong:#89e6cf;
      --accent:#2aa58a;
      --card:#ffffff;
      --text:#12343b;
      --soft:#eef9f6;
      --shadow: 0 6px 18px rgba(10,30,30,0.08);
      --round:16px;
    }
    *{box-sizing:border-box}
    body{
      font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, #f6fffd, #e9fbf8);
      color:var(--text);
      margin:0;
      padding:20px;
      -webkit-font-smoothing:antialiased;
    }
    .container{
      max-width:1000px;
      margin:0 auto;
    }
    header{
      display:flex;
      align-items:center;
      gap:16px;
      justify-content:space-between;
      margin-bottom:18px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--mint-strong),var(--mint));
      display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow);
      font-weight:700;color:var(--accent);font-size:28px;
    }
    h1{margin:0;font-size:20px;}
    p.lead{margin:0;color:#176b60;opacity:0.9}

    /* topics */
    .topics{display:flex;gap:12px;margin:18px 0;flex-wrap:wrap}
    .topic-btn{
      background:var(--card);border:2px solid transparent;padding:12px 16px;border-radius:12px;cursor:pointer;
      box-shadow:var(--shadow);min-width:160px;text-align:left;transition:transform .18s,box-shadow .18s,border-color .18s;
      display:flex;align-items:center;gap:12px;
    }
    .topic-btn:hover{transform:translateY(-4px);box-shadow:0 10px 26px rgba(10,30,30,0.12)}
    .topic-emoji{font-size:22px}
    .topic-title{font-weight:700}
    .topic-sub{font-size:13px;color:#2f6b5f;opacity:0.9}

    /* area */
    .main{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:20px;
      align-items:start;
    }

    /* card area */
    .card-wrap{display:flex;flex-direction:column;gap:14px;align-items:center}
    .card-stage{perspective:1200px;width:100%;max-width:560px;min-height:280px;display:flex;align-items:center;justify-content:center}
    .flashcard{
      width:100%;max-width:520px;height:280px;border-radius:16px;background:var(--card);box-shadow:var(--shadow);
      display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;cursor:pointer;
      transform-style:preserve-3d;transition:transform .6s;position:relative;
    }
    .flashcard.flipped{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;backface-visibility:hidden;border-radius:16px}
    .front{background:linear-gradient(180deg,var(--soft),#ffffff);}
    .back{transform:rotateY(180deg);background:linear-gradient(180deg,#ffffff,var(--soft));}

    .word{font-size:36px;font-weight:800;margin-bottom:6px;color:var(--accent)}
    .ipa{font-size:18px;color:#176b60;margin-bottom:8px}
    .meaning{font-size:20px;font-weight:700;margin-bottom:6px}
    .example{font-size:16px;color:#2f6b5f;padding:0 6px;text-align:center}

    /* controls */
    .controls{display:flex;gap:10px;align-items:center;justify-content:center;margin-top:6px}
    .btn{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(29,120,95,0.12)}
    .btn.secondary{background:transparent;color:var(--accent);border:2px solid var(--accent)}

    .play-btn{background:transparent;border:2px dashed var(--accent);padding:8px 12px;border-radius:12px;color:var(--accent);cursor:pointer;font-weight:700}

    /* sidebar */
    .sidebar{background:var(--card);border-radius:14px;padding:16px;box-shadow:var(--shadow);min-height:220px}
    .progress{font-weight:800;color:var(--accent);margin-bottom:10px}
    .small{font-size:13px;color:#2f6b5f;margin-bottom:8px}
    .navs{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .navs .btn{background:var(--card);color:var(--accent);border:2px solid var(--mint-strong);padding:8px 10px;font-weight:700;border-radius:10px;box-shadow:none}

    /* finished */
    .finished{display:none;flex-direction:column;align-items:center;gap:12px}
    .show.finished{display:flex}

    /* responsive */
    @media(max-width:900px){
      .main{grid-template-columns:1fr; padding-bottom:30px}
      .sidebar{order:2}
    }

    footer{margin-top:20px;text-align:center;color:#2f6b5f;font-size:14px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">L</div>
        <div>
          <h1>H·ªçc T·ª´ V·ª±ng - Flashcard (Mint)</h1>
          <p class="lead">Phi√™n √¢m IPA ‚Ä¢ Gi·ªçng ƒë·ªçc Anh‚ÄëM·ªπ ‚Ä¢ V√≠ d·ª• sinh ƒë·ªông</p>
        </div>
      </div>
      <div>
        <button class="btn secondary" id="homeBtn" onclick="resetToHome()">Trang ch·ªß</button>
      </div>
    </header>

    <div class="topics" id="topicsArea">
      <div class="topic-btn" onclick="selectTopic('travel')">
        <div class="topic-emoji">‚úàÔ∏è</div>
        <div>
          <div class="topic-title">Du l·ªãch</div>
          <div class="topic-sub">10 t·ª´: airport, passport,...</div>
        </div>
      </div>
      <div class="topic-btn" onclick="selectTopic('food')">
        <div class="topic-emoji">üçé</div>
        <div>
          <div class="topic-title">·∫®m th·ª±c</div>
          <div class="topic-sub">10 t·ª´: apple, bread,...</div>
        </div>
      </div>
      <div class="topic-btn" onclick="selectTopic('school')">
        <div class="topic-emoji">üè´</div>
        <div>
          <div class="topic-title">Tr∆∞·ªùng h·ªçc</div>
          <div class="topic-sub">10 t·ª´: teacher, student,...</div>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="card-wrap">
        <div class="card-stage">
          <div id="flashcard" class="flashcard" onclick="toggleFlip()">
            <div class="face front">
              <div class="word" id="wordText">Choose a topic</div>
              <div class="ipa" id="ipaText">/.../</div>
              <div style="font-size:14px;color:#0f5b4e">Nh·∫•p v√†o th·∫ª ƒë·ªÉ l·∫≠t ‚Äî nh·∫•n n√∫t üîä ƒë·ªÉ nghe</div>
            </div>
            <div class="face back">
              <div class="meaning" id="meaningText"></div>
              <div class="example" id="exampleText"></div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button class="btn" id="prevBtn" onclick="prevCard()">‚óÄ Tr∆∞·ªõc</button>
          <button class="play-btn" id="speakBtn" onclick="speakCurrent()">üîä Nghe ph√°t √¢m</button>
          <button class="btn" id="nextBtn" onclick="nextCard()">Ti·∫øp ‚ñ∂</button>
          <button class="btn secondary" id="flipBtn" onclick="toggleFlip()">L·∫≠t th·∫ª</button>
        </div>

        <div style="margin-top:8px;text-align:center;color:#176b60;font-weight:700" id="progressTxt"></div>

        <div class="finished" id="finishedBox">
          <img src="https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif" width="120" alt="congrats">
          <div style="font-size:18px;font-weight:800;color:var(--accent)">üéâ Tuy·ªát v·ªùi! B·∫°n ƒë√£ ho√†n th√†nh ch·ªß ƒë·ªÅ n√†y!</div>
          <div style="display:flex;gap:10px">
            <button class="btn" onclick="restartTopic()">H·ªçc l·∫°i ch·ªß ƒë·ªÅ n√†y</button>
            <button class="btn secondary" onclick="resetToHome()">V·ªÅ ch·ªß ƒë·ªÅ</button>
          </div>
        </div>
      </div>

      <aside class="sidebar">
        <div class="progress" id="topicTitle">Ch∆∞a ch·ªçn ch·ªß ƒë·ªÅ</div>
        <div class="small" id="topicDesc">Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ·ªü b√™n tr√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc.</div>
        <div style="margin-top:6px">
          <div style="font-weight:700;color:#176b60">Danh s√°ch t·ª´</div>
          <ol id="wordList" style="padding-left:18px;margin-top:6px"></ol>
        </div>

        <div style="margin-top:12px" class="navs">
          <button class="btn secondary" onclick="shuffleTopic()">L·ªôn x√°o</button>
          <button class="btn secondary" onclick="showAllExamples()">Hi·ªán v√≠ d·ª•</button>
          <button class="btn secondary" onclick="speakCurrent(true)">Ph√°t (t·ª´ + v√≠ d·ª•)</button>
        </div>
      </aside>
    </div>

    <footer>Designed for Linh ‚Ä¢ M√†u mint d·ªÖ th∆∞∆°ng ‚Ä¢ M·ªü b·∫±ng Chrome / C·ªëc C·ªëc / Edge ho·∫∑c tr√™n ƒëi·ªán tho·∫°i</footer>
  </div>

  <script>
    // Data: 3 topics x 10 words (with IPA, meaning, example)
    const DATA = {
      travel: {
        title: "Du l·ªãch ‚úàÔ∏è",
        desc: "Airport, passport, luggage‚Ä¶",
        words: [
          {en:"airport", ipa:"/Àà…õ…ôrp…îrt/", vi:"s√¢n bay", ex:"We arrived at the airport three hours before the flight."},
          {en:"passport", ipa:"/Ààp√¶sp…îrt/", vi:"h·ªô chi·∫øu", ex:"Don't forget to bring your passport at the check-in counter."},
          {en:"luggage", ipa:"/Ààl å…°…™d í/", vi:"h√†nh l√Ω", ex:"Her luggage was heavier than she expected."},
          {en:"ticket", ipa:"/Ààt…™k…™t/", vi:"v√©", ex:"I bought a one-way ticket to the island."},
          {en:"boarding pass", ipa:"/Ààb…îrd…™≈ã p√¶s/", vi:"th·∫ª l√™n m√°y bay", ex:"Show your boarding pass to the gate agent."},
          {en:"customs", ipa:"/Ààk åst…ômz/", vi:"h·∫£i quan", ex:"We had to declare some items at customs."},
          {en:"itinerary", ipa:"/a…™Ààt…™n…ôÀår…õri/", vi:"l·ªãch tr√¨nh", ex:"Her itinerary included visits to three cities."},
          {en:"suitcase", ipa:"/ÀàsuÀêtke…™s/", vi:"vali", ex:"He packed his clothes into a small suitcase."},
          {en:"departure", ipa:"/d…™Ààp…ërt É…ôr/", vi:"kh·ªüi h√†nh", ex:"The departure time was delayed by an hour."},
          {en:"arrival", ipa:"/…ôÀàra…™v…ôl/", vi:"ƒë·∫øn n∆°i", ex:"We waited at the arrival hall for our friends."}
        ]
      },
      food: {
        title: "·∫®m th·ª±c üçé",
        desc: "Apple, bread, chicken‚Ä¶",
        words: [
          {en:"apple", ipa:"/Àà√¶p…ôl/", vi:"t√°o", ex:"She ate a crisp apple as a quick snack."},
          {en:"bread", ipa:"/br…õd/", vi:"b√°nh m√¨", ex:"Fresh bread from the bakery smelled wonderful."},
          {en:"chicken", ipa:"/Ààt É…™k…ôn/", vi:"g√†", ex:"They ordered grilled chicken with vegetables."},
          {en:"rice", ipa:"/ra…™s/", vi:"c∆°m", ex:"A bowl of hot rice warmed him up."},
          {en:"noodles", ipa:"/ÀànuÀêd…ôlz/", vi:"m√¨", ex:"The street vendor served spicy noodles for dinner."},
          {en:"vegetables", ipa:"/Ààv…õd ít…ôb…ôlz/", vi:"rau c·ªß", ex:"She grows fresh vegetables in her small garden."},
          {en:"dessert", ipa:"/d…™Ààz…úrt/", vi:"m√≥n tr√°ng mi·ªáng", ex:"For dessert, we had chocolate cake."},
          {en:"snack", ipa:"/sn√¶k/", vi:"ƒë·ªì ƒÉn nh·∫π", ex:"He grabbed a quick snack between classes."},
          {en:"beverage", ipa:"/Ààb…õv…ôr…™d í/", vi:"ƒë·ªì u·ªëng", ex:"Cold beverages were available at the caf√©."},
          {en:"restaurant", ipa:"/Ààr…õst…ôr…ënt/", vi:"nh√† h√†ng", ex:"They found a cozy restaurant by the river."}
        ]
      },
      school:{
        title:"Tr∆∞·ªùng h·ªçc üè´",
        desc:"Teacher, student, classroom‚Ä¶",
        words:[
          {en:"teacher", ipa:"/ÀàtiÀêt É…ôr/", vi:"gi√°o vi√™n", ex:"The teacher praised her for excellent work."},
          {en:"student", ipa:"/ÀàstuÀêd…ônt/", vi:"h·ªçc sinh", ex:"Every student must submit their project on time."},
          {en:"classroom", ipa:"/Ààkl√¶sÀåruÀêm/", vi:"l·ªõp h·ªçc", ex:"The classroom was decorated with colorful posters."},
          {en:"homework", ipa:"/Ààho ämÀåw…úrk/", vi:"b√†i t·∫≠p v·ªÅ nh√†", ex:"He did his homework before watching TV."},
          {en:"exam", ipa:"/…™…°Ààz√¶m/", vi:"k·ª≥ thi", ex:"She studied all night for the important exam."},
          {en:"textbook", ipa:"/Ààt…õkstÀåb äk/", vi:"s√°ch gi√°o khoa", ex:"Open your textbook to chapter five."},
          {en:"library", ipa:"/Ààla…™Àåbr…õri/", vi:"th∆∞ vi·ªán", ex:"They borrowed two books from the library."},
          {en:"desk", ipa:"/d…õsk/", vi:"b√†n h·ªçc", ex:"He kept his notebooks in the desk drawer."},
          {en:"pencil", ipa:"/Ààp…õns…ôl/", vi:"b√∫t ch√¨", ex:"She sharpened her pencil before the test."},
          {en:"graduation", ipa:"/Àå…°r√¶d íuÀàe…™ É…ôn/", vi:"l·ªÖ t·ªët nghi·ªáp", ex:"Graduation day was filled with joy and pride."}
        ]
      }
    };

    // State
    let currentTopicKey = null;
    let order = []; // indices in current topic
    let idx = 0;
    let flipped = false;

    // UI elements
    const wordText = document.getElementById('wordText');
    const ipaText = document.getElementById('ipaText');
    const meaningText = document.getElementById('meaningText');
    const exampleText = document.getElementById('exampleText');
    const topicTitle = document.getElementById('topicTitle');
    const topicDesc = document.getElementById('topicDesc');
    const wordList = document.getElementById('wordList');
    const progressTxt = document.getElementById('progressTxt');
    const flashcard = document.getElementById('flashcard');
    const finishedBox = document.getElementById('finishedBox');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function selectTopic(key){
      currentTopicKey = key;
      const topic = DATA[key];
      topicTitle.textContent = topic.title;
      topicDesc.textContent = topic.desc;
      // build order and list
      order = [...Array(topic.words.length).keys()];
      idx = 0;
      renderWordList(topic.words);
      showCard();
      document.getElementById('finishedBox').classList.remove('show');
      flashcard.classList.remove('flipped');
    }

    function renderWordList(words){
      wordList.innerHTML='';
      words.forEach((w,i)=>{
        const li = document.createElement('li');
        li.textContent = (i+1)+'. '+w.en+' ‚Äî '+w.vi;
        wordList.appendChild(li);
      });
    }

    function showCard(){
      if(currentTopicKey===null){
        wordText.textContent='Ch·ªçn ch·ªß ƒë·ªÅ ƒë·ªÉ b·∫Øt ƒë·∫ßu';
        ipaText.textContent='/.../';
        meaningText.textContent='';
        exampleText.textContent='';
        progressTxt.textContent='';
        return;
      }
      const topic = DATA[currentTopicKey];
      if(idx < 0) idx = 0;
      if(idx >= topic.words.length){
        // finished
        wordText.textContent='';
        ipaText.textContent='';
        meaningText.textContent='';
        exampleText.textContent='';
        progressTxt.textContent = '';
        finishedBox.classList.add('show');
        return;
      }
      const w = topic.words[order[idx]];
      wordText.textContent = w.en;
      ipaText.textContent = w.ipa;
      meaningText.textContent = w.vi;
      exampleText.textContent = '"'+w.ex+'"';
      progressTxt.textContent = `T·ª´ ${idx+1}/${topic.words.length}`;
    }

    function toggleFlip(){
      if(currentTopicKey===null) return;
      flipped = !flipped;
      flashcard.classList.toggle('flipped');
      // if we flipped to back, play example automatically
      if(flipped){
        // small delay then speak example
        setTimeout(()=>{ speakCurrent(true); }, 300);
      }
    }

    function nextCard(){
      const topic = DATA[currentTopicKey];
      if(!topic) return;
      idx++;
      flashcard.classList.remove('flipped');
      flipped=false;
      showCard();
    }

    function prevCard(){
      if(!currentTopicKey) return;
      idx--;
      if(idx<0) idx=0;
      flashcard.classList.remove('flipped');
      flipped=false;
      showCard();
    }

    function restartTopic(){
      order = [...Array(DATA[currentTopicKey].words.length).keys()];
      idx = 0;
      flashcard.classList.remove('flipped');
      flipped=false;
      finishedBox.classList.remove('show');
      showCard();
    }

    function resetToHome(){
      currentTopicKey = null;
      order = [];
      idx = 0;
      flashcard.classList.remove('flipped');
      flipped=false;
      topicTitle.textContent = 'Ch∆∞a ch·ªçn ch·ªß ƒë·ªÅ';
      topicDesc.textContent = 'Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ·ªü b√™n tr√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc.';
      wordList.innerHTML='';
      document.getElementById('finishedBox').classList.remove('show');
      showCard();
      window.scrollTo({top:0,behavior:'smooth'});
    }

    function shuffleTopic(){
      if(!currentTopicKey) return;
      // Fisher-Yates shuffle
      for(let i=order.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [order[i],order[j]]=[order[j],order[i]];
      }
      idx=0;
      showCard();
    }

    function showAllExamples(){
      if(!currentTopicKey) return;
      const topic = DATA[currentTopicKey];
      let text = '';
      topic.words.forEach((w,i)=>{
        text += `${i+1}. ${w.en} (${w.ipa}) ‚Äî ${w.vi}\n   Example: ${w.ex}\n\n`;
      });
      alert(text);
    }

    // Speech - Web Speech API (SpeechSynthesis) - try to use en-US voice
    function getUSVoice(){
      const voices = speechSynthesis.getVoices();
      // prefer en-US voices
      let voice = voices.find(v=>v.lang==='en-US' && /female|female/i.test(v.name)) || voices.find(v=>v.lang==='en-US') || voices[0];
      return voice;
    }

    // Speak current word or word+example if withExample true
    function speakCurrent(withExample=false){
      if(!currentTopicKey) return;
      const topic = DATA[currentTopicKey];
      if(idx>=topic.words.length) return;
      const w = topic.words[order[idx]];
      // build text: word, ipa (optional), then example
      let toSpeak = w.en + ". " + (withExample ? w.ex : "");
      // ensure any ongoing speech is cancelled
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(toSpeak);
      u.lang = 'en-US';
      // choose voice when available
      const voice = getUSVoice();
      if(voice) u.voice = voice;
      u.rate = 0.95;
      u.pitch = 1.0;
      speechSynthesis.speak(u);
    }

    // On load: try to load voices (some browsers require user interaction)
    window.addEventListener('load',()=>{
      showCard();
      // Chrome may load voices async
      speechSynthesis.onvoiceschanged = ()=>{ /* voices updated */ };
    });

    // enable keyboard for next/prev/flip
    window.addEventListener('keydown',(e)=>{
      if(!currentTopicKey) return;
      if(e.key==='ArrowRight') nextCard();
      if(e.key==='ArrowLeft') prevCard();
      if(e.key===' '){ e.preventDefault(); toggleFlip(); }
    });
  </script>
</body>
</html>
